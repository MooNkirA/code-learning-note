# 第16章 服务调用链路追踪

> 注：此章节使用了 Spring Cloud Sleuth + Zipkin 的解决方案。更多内容详见[《Spring Cloud Sleuth》笔记](/07-分布式架构&微服务架构/02-SpringCloud/07-Spring-Cloud-Sleuth)

## 1. 链路追踪概述

### 1.1. 问题分析

随着分布式服务架构的流行，特别是**微服务**等设计理念在系统中的应用，每个服务变得越来越简单、纯粹，而复杂度被转移到了多个服务间协作的整体架构层面，各微服务间的调用关系也变得越来越复杂。通常一个由客户端发起的请求在后端系统中会经过多个不同的微服务调用来协同产生最后的请求结果，<font color=red>**这个过程就产生了一个服务调用链路**</font>。

![](images/118971123238872.png)

左图展示的是单体应用，在同一个进程中不同业务模块的相互调用；右图展示的是微服务架构，微服务间通过 rest 调用协作实现业务流程。随着业务的不断扩张，服务之间互相调用会越来越复杂

即使作为分布式系统的设计者、开发者，也很难清楚的说出某个服务的调用链路，况且服务调用链路还是动态变化的。在复杂的微服务架构系统中，几乎每一个前端请求都会形成一个复杂的分布式服务调用链路，一次请求少则经过三四次服务调用完成，多则跨越几十个甚至是上百个服务节点。

在这样的前提下，每条链路中任何一个依赖服务出现延迟过高或者错误都有可能引起请求最后的失败。并且当整个请求变慢或不可用时，开发人员是无法得知该请求是由某个或某些后端服务引起的。










