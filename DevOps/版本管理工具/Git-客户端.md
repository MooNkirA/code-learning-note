## 1. Git 相关图形化客户端

- Git 第三方 GUI Clients 官方推荐整理：https://git-scm.com/downloads/guis
- Sourcetree
- GitHub Desktop 网址：https://desktop.github.com/
- TortoiseGit
- Git Extensions 网址：https://gitextensions.github.io/

## 2. IDEA 集成 Git 客户端

### 2.1. 初始化配置 Git

1. 点击【File】菜单->【Settings】

![](images/161054208227337.png)

2. 选择【Version Control】->【Git】->在【Path to Git executable】中指定 git.exe 存放目录

![](images/226034308247503.png)

3. 点击【Test】按钮进行测试

![](images/409534508240172.png)

### 2.2. 创建本地仓库

1. 选择【VCS】->【Import into Version Control】->【Create Git Repository】或者

![](images/107195515227337.png)

2. 选择工程所在的目录后，即可创建本地仓库了

![](images/198535715247503.png)

3. 创建成功后，就会出现相关的 git 操作菜单

![](images/154835915240172.png)

### 2.3. Commit 提交代码

1. 右键选择【Git】->【Commit file...】，将当前项目代码提交到本地仓库

 ![](images/366334516232481.png)

或者点击 git 后边的对勾

![](images/420584716250361.png)

> 注意：项目中的配置文件不需要提交到本地仓库中，提交时需要忽略掉。在项目目录中创建忽略的文件`.gitignore`，文件内容如下：

```java
.idea
target
*.iml

.classpath
.project
.settings
Bin
```

2. 在提交框中，可以选择要提交的文件、填写提交信息、查看文件差异。

![](images/34324916247965.png)

3. 成功提交后，可以在底部的 Git 工具窗口查看提交的记录

![](images/489925316245467.png)

### 2.4. 版本切换

- 方式一：选择控制台【Git】(旧版本的idea叫“Version Control”)->【Log】->【Reset Current Branch...】->【Reset】。

![](images/133740017226708.png)

可以选择不同的回退方法，详情查看每个选项的说明

![](images/548270117249148.png)

这种**切换的特点是会抛弃原来的提交记录**

![](images/481510617223998.png)

- 方式二：选择控制台【Git】->【Log】->【Revert Commit】->【Merge】-> 处理代码 -> commit。

![](images/111810417244284.png)

![](images/95500517237830.png)

![](images/594310517230964.png)    

这种**切换的特点是会当成一个新的提交记录，之前的提交记录也都保留**。Revert 操作会当成一个新的提交记录，如果后悔了“回退”这个操作，也可以回退到没有回退之前的版本，因为历史记录还保留提交记录。

![](images/110760617221494.png)

### 2.5. 分支管理

#### 2.5.1. 创建分支

选择【VCS】(旧版本idea)->【Git】->【Branches】->【New Branch】-> 给分支起名字 ->【Creat】

![](images/306131517232945.png)

![](images/493561517225830.png)

![](images/136431617226439.png)

#### 2.5.2. 切换分支

- 选择右下角 Git 分支的名称按钮 -> 选择要切换的分支 ->【Checkout】

![](images/370461817253394.png)

#### 2.5.3. 合并分支

选择 Git(VCS)->【Merge...】

![](images/420832417235607.png)

选择要合并的分支 -> merge

![](images/447702617224905.png)

> Tips: 如果合并时出现代码冲突，需要处理冲突后再合并。

#### 2.5.4. 删除分支

点击右下角分支名称 -> 选中要删除的分支 ->【Delete】

![](images/354692817221156.png)

### 2.6. 克隆远程仓库到本地仓库

- 第一种方式(主窗口)：【Get from VSC】-> 选择【Version control: Git】-> 指定远程仓库的路径 -> 指定本地存放的路径 -> clone

![](images/352595117238424.png)

- 第二种方式(主菜单)：【Git】->【Clone...】-> 指定远程仓库的路径与本地存放的路径 -> clone

![](images/466855517239719.png)

### 2.7. 推送(push)本地仓库到远程仓库

1. 【Git】(VCS)->【Push...】

![](images/106143917221295.png)

2. 选择相应的分支，点击【Push】按钮，推送到远程仓库

![](images/57265917240721.png)

如果不是克隆远程仓库创建的，此时就需要点击 Define remote，设置 git 服务器远端地址。设置后，点击 Push 推送到远程仓库

![](images/478754017233385.png)

### 2.8. 更新(pull)远端仓库代码到本地仓库

选择菜单栏或者右键项目，选择【Pull...】，更新远程仓库

![](images/376451218240898.png)

### 2.9. 协同开发

模拟两个程序员同步代码与更新代码。

![](images/385075921221044.jpg)

![](images/472505921239470.jpg)

使用右边工具栏菜单：

![](images/86980022227337.jpg)

#### 2.9.1. 获取代码

点击 pull 图标获取远程仓库代码

![](images/303780122247503.jpg)

![](images/368070122240172.jpg)

#### 2.9.2. 推送代码

点击 push 图标推送代码到远程仓库

![](images/176570822236727.jpg)

#### 2.9.3. 解决冲突

两个程序员修改了同一个文件中的同一行代码，提交时

![](images/306291022232481.jpg) ![](images/438401022250361.jpg)

处理冲突:
![](images/592001122247965.jpg)

> Notes: <font color=red>**还需要重新push代码到远程仓库。**</font>

### 2.10. idea 取消项目与 git 仓库的关联

选择【file】->【settings】->【version control】，选择项目目录，再点“减号”即可解除 git 仓库的关联，然后去项目目录下删除`.git`这个文件夹即可

![](images/392491618226450.png)

## 3. SourceTree（待整理）

> Sourcetree 网址：https://www.sourcetreeapp.com/

### 3.1. 参考资料

> Git 客户端 SourceTree 使用教程参考：
>
> - https://www.cnblogs.com/Can-daydayup/p/13128633.html
> - http://blog.cocoachina.com/article/71732

## 4. TortoiseGit

> TortoiseGit 网址：https://tortoisegit.org/

### 4.1. windows 版本安装

#### 4.1.1. 安装步骤

使用版本：TortoiseGit-2.6.0.0-64bit.msi

![](images/511812709242093.jpg)

配置语言包：

![](images/81722809259973.jpg)

由于目前只有英文语言包，默认即可继续下一步，配置目录。

![](images/539402809257577.jpg)

配置开发者姓名及邮箱，每次提交代码时都会把此信息包含到提交的信息中。Email随便填写即可

![](images/167502909255079.jpg)

**选择 OpenSSH 协议**，点击“完成”按钮完成配置。

![](images/492463209236320.jpg)

完整完毕后在系统右键菜单中会出现 git 的菜单项。

![](images/257953309258760.jpg)

#### 4.1.2. 安装中文语言包

安装中文语言包并不是必选项，可以根据个人情况来选择安装。安装包：TortoiseGit-LanguagePack-x.x.x.x-64bit-zh_CN.msi

![](images/248713010247442.jpg)

直接“下一步”完整完毕。鼠标右键选择 Settings

![](images/156553210240576.jpg)

语言包安装完毕后可以在 TortoiseGit 的设置中调整语言

![](images/409033210231106.jpg)

### 4.2. 创建 Git 本地仓库

使用 TortoiseGit 时只需要在目录中点击右键菜单选择“在这里创建版本库”

![](images/493963310233610.jpg)

![](images/580023310242557.jpg) ![](images/65913410235442.jpg)

版本库创建成功，会在此目录下创建一个 `.git` 的隐藏目录，如下所示：

![](images/402213410236051.jpg)

### 4.3. 添加文件

在 D:\git_repo 目录下创建一个 test.txt 文件

![](images/538641511245219.jpg)

> Tips: 安装完客户端后，需要重启电脑才可以看到相应的图标

![](images/330871611234517.jpg)

![](images/406881611230768.jpg)

成功添加后，文本文件变为带『+』号的图标：

![](images/443781711230907.jpg)

### 4.4. 提交文件

在 mytest.txt 上再次点击右键选择“提交”，此时将文件保存至版本库中。

![](images/343391811242997.jpg)


![](images/441581811248036.jpg) ![](images/500051811249331.jpg)

### 4.5. 修改文件

#### 4.5.1. 提交修改

被版本库管理的文件不可避免的要发生修改，此时只需要直接对文件修改即可。修改完毕后需要将文件的修改提交到版本库。

修改后的 test.txt（修改后图标变成红色感叹号）文件上点击右键，然后选择“提交”，和之前的提交方式一样。

![](images/195232011250333.jpg)

#### 4.5.2. 查看修改日志

在开发过程中可能会经常查看代码的修改历史，或者叫做查看代码的修改日志。用来查看某个版本是谁修改的，什么时间修改的，修改了哪些内容。可以在文件上点击右键选择“显示日志”来查看文件的修改历史。

![](images/72002111250510.jpg) ![](images/141502111236062.jpg)

#### 4.5.3. 比较差异

当文件内容修改后，需要和修改之前对比一下修改了哪些内容此时可以使用“比较差异功能”

![](images/99082211252341.jpg)

**与当前版本比较差异**：

![](images/182292211245386.jpg)

**与上一个版本比较差异**：

![](images/373162311232484.jpg)

#### 4.5.4. 还原修改

当文件修改后不想把修改的内容提交，还想还原到未修改之前的状态。此时可以使用“还原”功能。

![](images/478512411250527.jpg)

![](images/568912411256282.jpg) ![](images/38832511256914.jpg)

> Notes: <font color=red>**此操作会撤销所有未提交的修改，所以当做还原操作是需要慎重！！！**</font>

#### 4.5.5. 检查已修改

当项目提交之前先检查哪些文件发生了改变，再比较差异，决定是否提交。

![](images/200322611247650.jpg) ![](images/274582611240509.jpg)

### 4.6. 重命名文件

右键文件选择『更名...』

![](images/497270312259318.jpg)

![](images/586850312254426.jpg)

修改完成后提交

![](images/48290412261937.jpg)

### 4.7. 删除文件

需要删除无用的文件时可以使用 git 提供的删除功能直接将文件从版本库中删除。

![](images/403010512260948.jpg)

- 删除：git 版本库与工作区本地副本一起删除。
- 删除并保留本地副本：只删除 git 版本库中的文件，保留工作区本地副本

> Tips: **删除文件以后，需要再次提交**

### 4.8. Java工程提交到版本库

- 第一步：创建 java 工程后，复制到工作目录中

![](images/102220712248288.jpg)

- 第二步：忽略不需要的文件或文件夹。在此工程中，并不是所有文件都需要保存到版本库中的例如 eclipse 的相关配置 `.settings` 目录及目录下的文件就可以忽略。
    - 方式一：在 Git 工作区的根目录下创建一个特殊的 `.gitignore` 文件，然后把要忽略的文件名填进去，Git 就会自动忽略这些文件。
    - 方式二：如果使用 TortoiseGit 的话可以使用菜单项直接进行忽略。

![](images/479420912235279.jpg)

![](images/94121012245756.jpg)

按上面步骤再把 bin、.classpath、.project 都添加到忽略列表中。完成后在此文件夹内会多出一个 .gitignore 文件，这个文件就是忽略文件，当然也可以手工编辑。其中的内容就是把 bin 目录忽略掉。

![](images/90351112238326.jpg)  ![](images/191531112258868.jpg)

- 第三步：将工程添加到暂存区

![](images/160361212237483.jpg)

![](images/227791212256162.jpg)  ![](images/324541212258259.jpg)

- 第四步：提交代码。将代码添加到 master 分支上，其中 `.gitignore` 文件也需要添加到暂存区，然后提交到版本库。

### 4.9. 导出指定版本

第一步：显示所有版本日志信息

![](images/532501512263277.jpg)

第二步：选中指定版本

![](images/241091612263372.jpg)

第三步：导出指定版本为zip文件

![](images/137541712250652.jpg)

![](images/222481712243474.jpg)

### 4.10. 还原文件到指定版本

第一步：选中指定版本号与需要还原的文件

![](images/62801812239338.jpg)

第二步：还原选中的文件即可

![](images/590871812240356.jpg)

### 4.11. Github 远程仓库操作

#### 4.11.1. 同步 Github 仓库

第一步：查看网络中的SSH客户端：ssh.exe

![](images/504741912258144.jpg)

第二步：添加远端

![](images/164772012231393.jpg)

- URL：远程仓库的地址
- 推送 URL：也是相同的
- Putty 密钥：选择刚才生成的密钥中的私钥(<font color=red>**可以不选择**</font>)

第三步：同步，在本地仓库的文件夹中单击右键，选择“Git同步”

![](images/331352112242931.jpg)

![](images/471612112233650.jpg)

#### 4.11.2. 克隆 Github 仓库

在任意目录点击右键：

![](images/176712412252805.jpg)

![](images/229542412232457.jpg)

#### 4.11.3. 拉取 Github 代码

使用 TortoiseGit 可以从右键菜单中点击【拉取】（pull）或者【获取】（fetch）

![](images/413522512230903.jpg)

### 4.12. 分支管理

在每次的提交，Git 都把它们串成一条时间线，这条时间线就是一个分支。截止到目前，只有一条时间线，在 Git 里，这个分支叫主分支，即 master 分支。HEAD 指针用来指向目前操作的 master 分支，master 分支才是提交的。

![](images/384402712260721.jpg)

#### 4.12.1. 创建分支

在本地仓库文件夹中点击右键，然后从菜单中选择“创建分支”：

![](images/162732912239655.jpg) ![](images/236912912239557.jpg)

#### 4.12.2. 切换分支

如果想创建完毕后直接切换到新分支可以勾选“切换到新分支”选项或者从菜单中选择“切换/检出”来切换分支：

![](images/419853012249879.jpg)

分支切换到 dev 后就可以对工作区的文件进行修改，然后提交到 dev 分支，原来的 master 分支不受影响。例如修改 Hello.java 中的内容，然后提交到 dev 分支。

![](images/437983112253263.jpg)

切换到 master 分支后还是原来的内容：

![](images/335613212258061.jpg)

#### 4.12.3. 合并分支

将 dev 分支合并到 master 分支，需先切换到 master 分支。再从右键菜单中选择合并。

![](images/594023412254420.jpg)

![](images/201773512246505.jpg)

再查看 Hello.java 类的内容就已经更新了：

![](images/544203512237344.jpg)

### 4.13. 解决冲突

两个分支中编辑的内容都是相互独立互不干扰的，那么如果在两个分支中都对同一个文件进行编辑，然后再合并，就有可能会出现冲突。

例如在 master 分支中对 Hello.java 进行编辑：

![](images/66823912254985.jpg)

    两个分支中编辑的内容都是相互独立互不干扰的，那么如果在两个分支中都对同一个文件进行编辑，然后再合并，就有可能会出现冲突。
例如在master分支中对Hello.java进行编辑：

![](images/100624012245965.jpg)

然后提交到版本库。最后进行分支合并，将 dev 分支合并到 master 分支。需要先切换到 master 分支然后进行分支合并。

![](images/517124112245621.jpg)

此时出现版本冲突。

![](images/269834312261716.jpg)

![](images/320504512234163.jpg)

冲突需要手动解决，如下图解决完毕：

![](images/488764612250244.jpg)

在冲突文件上单机右键选择“解决冲突”菜单项：

![](images/413364712243238.jpg)

![](images/492394712254699.jpg)

把冲突解决完毕的文件提交到版本库就可以。

![](images/578264712250569.jpg)

## 5. Eclipse 集成 Git 客户端

### 5.1. 安装 egit 插件

说明：若 Eclipse 版本自带此 egit 插件，则无须安装。

### 5.2. 提交代码到本地仓库

#### 5.2.1. 项目加入忽略文件

加入检入时需要忽略的文件 `.gitignore`，文件内容如下：

```
.classpath
.project
.settings
target
bin
```

#### 5.2.2. 分享项目选择使用Git

![](images/442991414242455.jpg)

![](images/525241414235581.jpg)

#### 5.2.3. 将项目移到工作目录

第一步：创建新的本地仓库

![](images/260961514237991.jpg)

第二步：将工程移到工作目录

![](images/525151514244546.jpg)

#### 5.2.4. 提交代码到暂存区

第一步：切换到 java 视图

![](images/271331614256923.jpg)

第二步：添加代码到 git 暂存区

![](images/524761614247559.jpg)

#### 5.2.5. Commit 提交代码

![](images/262971714263054.jpg) ![](images/325601714255241.jpg)

### 5.3. push 分支代码到远程仓库

![](images/369101914241938.jpg) ![](images/468221914236152.jpg)

![](images/166282014252153.jpg)

![](images/223872014246733.jpg)

> Notes: <font color=red>当需要选择不同分支同步代码到远程仓库时使用。一般第一次同步代码用得比较多。</font>

设置 git 服务器地址：

![](images/39722214232697.jpg)

![](images/118532214253544.jpg) ![](images/208652214247156.jpg)

### 5.4. push 同步代码到远程仓库

![](images/133522314235448.jpg) ![](images/195622314261730.jpg)

### 5.5. pull 更新代码到本地仓库

![](images/155482414235254.jpg) ![](images/206442414260273.jpg)

注意：Commit 提交的作用是把代码提交到本地。Push 的作用是把本地的代码提交到远程的 git 服务器。

### 5.6. clone 克隆远程仓库到本地

第一步：进入 git 仓库界面

![](images/498752514253319.jpg)

第二步：填写远程仓库Location、Connection、Authentication信息

![](images/597052514240545.jpg)

第三步：分支选择

![](images/364972614244592.jpg)

第四步：设置本地仓库信息

![](images/444532614232921.jpg)

### 5.7. 导入项目到 Eclipse

![](images/41502814262288.jpg) ![](images/116082814253001.jpg)

填写项目名称：

![](images/454292814235636.jpg)

转换成对应的 Eclipse 项目

![](images/405892914259360.jpg)

### 5.8. 协同开发

开启两个 Eclipse，模拟两个程序员同步代码与更新代码。

![](images/73913114257539.jpg)

### 5.9. 解决冲突

第一步：两个程序员修改了同一个文件中的同一行代码，提交时

![](images/587733414249687.jpg)

![](images/71833514236885.jpg)

第二步：选择 pull 更新代码到本地仓库

![](images/480773514236444.jpg)

![](images/563693514257392.jpg)

第三步：处理冲突

![](images/461463614246188.jpg)

![](images/570373614235712.jpg)

![](images/86213714247127.jpg)

把解决冲突后的代码先执行 Add to Index

![](images/28433914254601.jpg)

处理完成后，先 Commit 到本地仓库，再 Push 到远程仓库。
